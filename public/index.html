<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- REACT STUFF -->
    <meta charset="utf-8" />
    <link rel="icon" href="%PUBLIC_URL%/gift-logo.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#000000" />
    <meta
      name="description"
      content="Web site created using create-react-app"
    />
    <link rel="apple-touch-icon" href="%PUBLIC_URL%/logo192.png" />
    <link rel="manifest" href="%PUBLIC_URL%/manifest.json" />

    <!-- FONTS -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@500&display=swap"
      rel="stylesheet"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Pacifico&display=swap"
      rel="stylesheet"
    />

    <!-- TAB TITLE -->
    <title>GIFT PICKER | By Presently</title>
  </head>
  <body>
    <div id="root"></div>

    <!-- Scroll to next question -->
    <!-- <script>
      const button = document.getElementById('selected');
      button.onclick = function () {
        document.getElementById('questionContainer').scrollLeft += 450;
      };
    </script> -->

    <!-- JAVASCRIPT AUTH (WITHOUT SIGN IN)-->
    <!-- This works and shows data in the console
  
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/2.0.0/jquery.min.js"></script>
    <script type="text/javascript">
      var settings = {
        "url": "https://v1.nocodeapi.com/qlangstaff/google_sheets/cIMNrJLsqTxDGZCn?tabId=Gifts&perPage=500&page=1&valueRenderOption=FORMATTED_VALUE?",
        "method": "get",
        "timeout": 0,
        "headers": {
          "Content-Type": "application/json"
        },
      };
      $.ajax(settings).done(function (response) {
        console.log(response);
      });
    </script> -->

    <!-- JAVASCRIPT AUTH (WITH SIGN IN)-->
    <!-- This doesn't work without a sign in button

    <button id="authorize_button" style="display: none;">Authorize</button>
    <button id="signout_button" style="display: none;">Sign Out</button>
    <pre id="content" style="white-space: pre-wrap;"></pre>

    <script type="text/javascript">
    var CLIENT_ID = '1089007490305-akbf33lre5jca8grj0ff4321btiq9gpn.apps.googleusercontent.com';
    var API_KEY = 'AIzaSyA2TjxJhG3fWGD2TlKZUT-2hlxgzqIU018';
    var DISCOVERY_DOCS = ["https://sheets.googleapis.com/$discovery/rest?version=v4"];
    var SCOPES = "https://www.googleapis.com/auth/spreadsheets";

    var authorizeButton = document.getElementById('authorize_button');
    var signoutButton = document.getElementById('signout_button');

    function handleClientLoad() {
      gapi.load('client:auth2', initClient);
    }

    function initClient() {
      gapi.client.init({
        apiKey: API_KEY,
        clientId: CLIENT_ID,
        discoveryDocs: DISCOVERY_DOCS,
        scope: SCOPES
      }).then(function () {
        gapi.auth2.getAuthInstance().isSignedIn.listen(updateSigninStatus);
        updateSigninStatus(gapi.auth2.getAuthInstance().isSignedIn.get());
        authorizeButton.onclick = handleAuthClick;
        signoutButton.onclick = handleSignoutClick;
      }, function(error) {
        appendPre(JSON.stringify(error, null, 2));
      });
    }

    function updateSigninStatus(isSignedIn) {
      if (isSignedIn) {
        authorizeButton.style.display = 'none';
        signoutButton.style.display = 'block';
        listGifts();
      } else {
        authorizeButton.style.display = 'block';
        signoutButton.style.display = 'none';
      }
    }
    
    function handleAuthClick(event) {
      gapi.auth2.getAuthInstance().signIn();
    }

    function handleSignoutClick(event) {
      gapi.auth2.getAuthInstance().signOut();
    }

    function appendPre(message) {
      var pre = document.getElementById('content');
      var textContent = document.createTextNode(message + '\n');
      pre.appendChild(textContent);
    }

    function listGifts() {
      gapi.client.sheets.spreadsheets.values.get({
        spreadsheetId: '1hXqeYl_sGuJWah8uJvWUIYzQIy1ipqihMNcXw2fB5Hw',
        range: 'Gifts!A1:C19',
      }).then(function(response) {
        var range = response.result;
        if (range.values.length > 0) {
          appendPre('Gift, Age, Type:');
          for (i = 0; i < range.values.length; i++) {
            var row = range.values[i];
            appendPre(row[0] + ', ' + row[1] + ', ' + row[2]);
          }
        } else {
          appendPre('No data found.');
        }
      }, function(response) {
        appendPre('Error: ' + response.result.error.message);
      });
    }
    </script>
    <script async defer src="https://apis.google.com/js/api.js"
      onload="this.onload=function(){};handleClientLoad()"
      onreadystatechange="if (this.readyState === 'complete') this.onload()">
    </script> -->
  </body>
</html>
